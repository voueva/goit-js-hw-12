{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst key = '49650376-6654a0e8c93b5d9da070a04be';\nconst orientation = 'horizontal';\nconst safesearch = 'true';\nconst image_type = 'photo';\nexport const per_page = 15;\n\nexport async function getImageList(q, page) {\n    const url = `https://pixabay.com/api/?key=${key}&q=${q}&image_type=${image_type}&orientation=${orientation}&safesearch=${safesearch}&page=${page}&per_page=${per_page}`;\n    \n    try {\n        const response = await axios.get(url);\n        return response;\n    } catch (error) {\n        throw error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.load-button');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) { \n    const galleryMarkup = images.map(({ previewURL, largeImageURL, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${previewURL}\" />\n            </a>\n            <div class=\"gallery-image-panel\">\n                <div class=\"gallery-image-panel_item\">\n                    <div class=\"gallery-image-panel_item-field\">Likes</div>\n                    <div class=\"gallery-image-panel_item-value\">${likes}</div>\n                </div>\n                <div class=\"gallery-image-panel_item\">\n                    <div class=\"gallery-image-panel_item-field\">Views</div>\n                    <div class=\"gallery-image-panel_item-value\">${views}</div>\n                </div>\n                <div class=\"gallery-image-panel_item\">\n                    <div class=\"gallery-image-panel_item-field\">Comments</div>\n                    <div class=\"gallery-image-panel_item-value\">${comments}</div>\n                </div>\n                <div class=\"gallery-image-panel_item\">\n                    <div class=\"gallery-image-panel_item-field\">Downloads</div>\n                    <div class=\"gallery-image-panel_item-value\">${downloads}</div>\n                </div>\n            </div>\n        </li>\n    `).join('');\n\n    galleryList.insertAdjacentHTML('beforeend', galleryMarkup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryList.innerHTML = '';\n }\n\nexport function showLoader() { \n    loader.style.display = 'block';\n}\n\nexport function hideLoader() { \n    loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() { \n    loadButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() { \n    loadButton.style.display = 'none';\n}\n\nexport function scrollBy() {\n    const firstCard = document.querySelector('.gallery-item');\n    if (!firstCard) return;\n\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}","\n\nimport { getImageList, per_page } from './js/pixabay-api'\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, scrollBy } from './js/render-functions'\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchInput = document.querySelector('#searchInput');\nconst searchForm = document.querySelector('#searchForm');\nconst loadButton = document.querySelector('.load-button');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nasync function showImages(currentQuery, currentPage) {\n    try {\n        const res = await getImageList(currentQuery, currentPage);\n        const images = res.data.hits;\n\n        if (images.length === 0 && currentPage === 1) {\n            iziToast.info({\n                title: 'Немає результатів',\n                message: 'Спробуйте інший запит.',\n            });\n            hideLoadMoreButton();\n            hideLoader();\n            return;\n        }\n\n        createGallery(images);\n\n        if (res.data.total > currentPage * per_page) {\n            showLoadMoreButton();\n        } else {\n            iziToast.info({\n                title: 'Більше зображень немає',\n                message: 'Ви переглянули всі результати.',\n            });\n        }\n    } catch (error) {\n        hideLoadMoreButton();\n\n        if (axios.isAxiosError(error)) {\n            if (error.response) {\n                const status = error.response.status;\n\n                if (status === 403) {\n                    iziToast.error({\n                        title: 'Доступ заборонено',\n                        message: 'Можливо, ваш API ключ недійсний або вичерпано ліміт.',\n                    });\n                } else if (status === 404) {\n                    iziToast.warning({\n                        title: 'Не знайдено',\n                        message: 'Ресурс не існує. Спробуйте змінити запит.',\n                    });\n                } else if (status >= 500) {\n                    iziToast.error({\n                        title: 'Серверна помилка',\n                        message: 'Сервер не відповідає. Спробуйте пізніше.',\n                    });\n                } else {\n                    iziToast.error({\n                        title: `Помилка ${status}`,\n                        message: error.response.statusText || 'Невідома помилка',\n                    });\n                }\n\n            } else if (error.request) {\n                iziToast.error({\n                    title: 'Немає відповіді від сервера',\n                    message: 'Перевірте інтернет-з’єднання або спробуйте ще раз.',\n                });\n            } else {\n                iziToast.error({\n                    title: 'Налаштування запиту',\n                    message: 'Щось пішло не так при налаштуванні запиту.',\n                });\n            }\n        } else {\n            iziToast.error({\n                title: 'Неочікувана помилка',\n                message: 'Щось пішло не так. Спробуйте ще раз.',\n            });\n        }\n    } finally {\n        hideLoader();\n    }\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const q = searchInput.value.trim();\n    if (q === '') {\n        iziToast.warning({\n            title: 'Увага',\n            message: 'Будь ласка, введіть пошуковий запит',\n        });\n        return;\n    }\n\n    hideLoadMoreButton();\n    clearGallery();\n    showLoader();\n\n    currentQuery = q.replace(/\\s+/g, '+');\n    currentPage = 1;\n\n    await showImages(currentQuery, currentPage);\n});\n\nloadButton.addEventListener('click', async () => {\n    hideLoadMoreButton();\n    showLoader();\n\n    currentPage++;\n\n    await showImages(currentQuery, currentPage);\n    scrollBy();\n});\n"],"names":["key","orientation","safesearch","image_type","per_page","getImageList","q","page","url","axios","error","galleryList","loadButton","loader","lightbox","SimpleLightbox","createGallery","images","galleryMarkup","previewURL","largeImageURL","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollBy","firstCard","cardHeight","searchInput","searchForm","currentPage","currentQuery","showImages","res","iziToast","status","event"],"mappings":"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"}